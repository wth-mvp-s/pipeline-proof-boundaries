# E004 — Stabilité des identifiants de ressources

Cette règle définit une contrainte structurelle du pipeline CI/CD.  
Les identifiants de ressources exposés ou consommés par des tiers
(ex. services externes, captcha, endpoints, webhooks)
doivent rester **strictement stables** entre les publications.

---

### Problème
Il n’existe pas de contrat explicite garantissant la stabilité
des identifiants de ressources à travers les déploiements.

Le pipeline ne garantit pas que :
- un même identifiant référence toujours la même ressource,
- une publication ne génère pas de nouveaux identifiants,
- les dépendances externes continuent de pointer vers des cibles valides.

---

### Conséquence
Un déploiement peut être techniquement réussi,
tout en introduisant un changement logique du système.

Les intégrations tierces peuvent cesser de fonctionner
sans modification apparente du code ou de l’infrastructure.

---

### Impact
- Rupture silencieuse des intégrations externes
- Difficulté de diagnostic (déploiement « vert », système incohérent)
- Perte de déterminisme entre deux versions du système

---

Les implémentations suivantes illustrent des causes techniques fréquentes,
et non des symptômes observés en production.

---

## Implémentations fréquemment observées dans les pipelines CI/CD à l’origine du problème

- Génération automatique d’identifiants à chaque publication

  Exemple de comportement non déterministe :

        Un identifiant de ressource est recréé
        à chaque déploiement,
        sans mécanisme de persistance ou de reprise.

- Couplage implicite entre déploiement et création de ressources

  Exemple de dépendance cachée :

        Une ressource est recréée
        lors d’un redeploy,
        modifiant son identifiant sans changement fonctionnel.

- Absence de validation de stabilité post-déploiement

  Exemple de contrôle manquant :

        Aucun contrôle ne vérifie
        que les identifiants exposés
        sont identiques à ceux de la version précédente.
