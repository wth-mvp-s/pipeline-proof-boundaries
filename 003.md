# E003 — Source de version unique et non ambiguë

Cette règle définit une contrainte structurelle du pipeline CI/CD.  
La version déployée doit provenir d’une **source unique, explicite et traçable**,
liant sans ambiguïté le commit, le build, l’artefact et le déploiement.

---

### Problème
La version utilisée par le pipeline est définie de manière indirecte ou implicite,
sans lien formel avec l’artefact réellement produit.

Le pipeline ne garantit pas :
- que la version identifie un artefact précis,
- que la version correspond au code effectivement déployé,
- que la décision de version est prise à un endroit unique et vérifiable.

---

### Conséquence
Le système peut déployer un artefact sans être capable d’affirmer
quelle version logique est réellement en production.

En cas d’incident, il devient difficile de relier :
- un comportement observé,
- à un commit,
- puis à un artefact et à un déploiement précis.

---

### Impact
- Perte de traçabilité bout-en-bout
- Analyse d’incident ralentie ou impossible
- Rupture du lien entre versionnement et garanties de sécurité

---

Les implémentations suivantes illustrent des causes techniques fréquentes,
et non des symptômes observés en production.

---

## Implémentations fréquemment observées dans les pipelines CI/CD à l’origine du problème

- Version définie indépendamment de l’artefact

  Exemple de version détachée :

        appVersion: "1.0.*"
        La version est calculée sans référence explicite
        à l’artefact réellement produit.

- Absence de chaîne commit → build → artefact → déploiement

  Exemple de rupture de traçabilité :

        Le pipeline consomme une version,
        sans pouvoir établir le lien
        avec le commit ou le build correspondant.

- Décision de version répartie dans le pipeline

  Exemple de responsabilité diffuse :

        La version est partiellement définie
        dans le code, les scripts ou la configuration,
        sans point de décision unique.
